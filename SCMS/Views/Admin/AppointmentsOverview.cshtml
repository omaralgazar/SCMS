@model List<SCMS.Models.Appointment>

@{
    ViewData["Title"] = "Appointments Overview";
    Layout = "_Layout";
}

<div class="container" style="margin-top:40px;">
    <div class="card">
        <h1 style="color: var(--primary); font-size: 28px; margin-bottom:20px;">📋 Appointments Overview</h1>

        <table class="table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Doctor</th>
                    <th>Patients</th>
                    <th>Status</th>
                    <th>Price</th>
                </tr>
            </thead>
            <tbody>
                @if (Model != null && Model.Any())
                {
                    int counter = 1;
                    foreach (var app in Model)
                    {
                        <tr>
                            <td>@counter</td>
                            <td>@app.AppointmentDate.ToString("yyyy-MM-dd")</td>
                            <td>@app.StartTime.ToString(@"hh\:mm") - @app.EndTime.ToString(@"hh\:mm")</td>
                            <td>@app.Doctor.FullName</td>
                            <td>
                                @if (app.Bookings.Any())
                                {
                                    <ul style="padding-left:15px;">
                                        @foreach (var booking in app.Bookings)
                                        {
                                            <li>@booking.Patient.FullName</li>
                                        }
                                    </ul>
                                }
                                else
                                {
                                    <span style="color: var(--text-muted);">No patients yet</span>
                                }
                            </td>
                            <td>
                                <span class="badge @(app.Status == "Available" ? "badge-success" : "badge-warning")">
                                    @app.Status
                                </span>
                            </td>
                            <td>@app.Price.ToString("C")</td>
                        </tr>
                        counter++;
                    }
                }
                else
                {
                    <tr>
                        <td colspan="7" style="text-align:center; color: var(--text-muted);">
                            No appointments available.
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
